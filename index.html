<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Educational Posts</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f9f9f9;
      color: #333;
    }
    header {
      text-align: center;
      margin-bottom: 30px;
    }
    h1 {
      color: #2c3e50;
    }
    .post {
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .post h2 {
      margin-top: 0;
      color: #2980b9;
    }
    .meta {
      font-size: 0.9em;
      color: #777;
      margin-bottom: 10px;
    }
    .like-btn {
      background: #2980b9;
      color: #fff;
      border: none;
      padding: 8px 14px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9em;
    }
    .like-btn:hover {
      background: #1f6391;
    }
    .content {
      max-height: 60px;
      overflow: hidden;
    }
    .see-more {
      background: transparent;
      border: none;
      color: #2980b9;
      cursor: pointer;
      font-size: 0.9em;
      margin-top: 5px;
    }
  </style>

  <!-- Firebase SDK -->
  <script type="module">
    // Import Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, get, set, update, onValue } 
      from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // Your Firebase Config (replace with your own from Firebase Console)
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // Toggle like
    async function toggleLike(id) {
      const btn = document.getElementById("like-" + id);
      const likeRef = ref(db, "likes/" + id);

      get(likeRef).then(snapshot => {
        let count = snapshot.exists() ? snapshot.val() : 0;
        let liked = btn.getAttribute("data-liked") === "true";

        if (liked) {
          count--;
          liked = false;
        } else {
          count++;
          liked = true;
        }

        btn.innerText = "üëç Like (" + count + ")";
        btn.setAttribute("data-liked", liked);

        set(likeRef, count);
      });
    }

    // Load likes from Firebase
    window.onload = function() {
      const buttons = document.querySelectorAll(".like-btn");
      buttons.forEach(btn => {
        const id = btn.id.split("-")[1];
        const likeRef = ref(db, "likes/" + id);

        onValue(likeRef, snapshot => {
          let count = snapshot.exists() ? snapshot.val() : 0;
          btn.innerText = "üëç Like (" + count + ")";
        });

        btn.setAttribute("data-liked", "false");
      });
    }

    // Expand essay
    window.toggleContent = function(id) {
      const content = document.getElementById("content-" + id);
      const btn = document.getElementById("see-" + id);

      if (content.style.maxHeight === "none") {
        content.style.maxHeight = "60px";
        btn.innerText = "See More";
      } else {
        content.style.maxHeight = "none";
        btn.innerText = "See Less";
      }
    }

    window.toggleLike = toggleLike;
  </script>
</head>
<body>
  <header>
    <h1>Educational Posts</h1>
    <p>A simple page for learning resources</p>
  </header>

  <div class="post">
    <h2>What is Flood Control?</h2>
    <div class="meta">Posted by <strong>Admin</strong> on September 21, 2025</div>
    <div class="content" id="content-1">
      Flood control is the practice of managing water to prevent flooding in communities. 
      It is important in reducing damage and protecting lives. Flood management systems 
      include dams, levees, and proper urban planning to ensure safety during heavy rains.
    </div>
    <button class="see-more" id="see-1" onclick="toggleContent(1)">See More</button><br>
    <button id="like-1" class="like-btn" onclick="toggleLike(1)">üëç Like (0)</button>
  </div>

  <div class="post">
    <h2>Importance of Reading</h2>
    <div class="meta">Posted by <strong>Teacher Jane</strong> on September 20, 2025</div>
    <div class="content" id="content-2">
      Reading helps improve vocabulary, knowledge, and critical thinking skills. 
      It opens doors to new ideas and perspectives. Students who read regularly 
      also develop better writing skills and perform better academically.
    </div>
    <button class="see-more" id="see-2" onclick="toggleContent(2)">See More</button><br>
    <button id="like-2" class="like-btn" onclick="toggleLike(2)">üëç Like (0)</button>
  </div>

  <div class="post">
    <h2>Cyberbullying Awareness</h2>
    <div class="meta">Posted by <strong>Student Council</strong> on September 18, 2025</div>
    <div class="content" id="content-3">
      Cyberbullying affects mental health and well-being. Awareness and education 
      help prevent and address this issue effectively. Schools should implement 
      programs that promote digital responsibility and kindness online.
    </div>
    <button class="see-more" id="see-3" onclick="toggleContent(3)">See More</button><br>
    <button id="like-3" class="like-btn" onclick="toggleLike(3)">üëç Like (0)</button>
  </div>

</body>
</html>